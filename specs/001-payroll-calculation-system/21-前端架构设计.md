# PayrollMaster前端架构蓝图

## 系统整体架构

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                          PayrollMaster 前端架构                             │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│  ┌─────────────────────────────────────────────────────────────────────┐  │
│  │                    Next.js 14 (App Router)                          │  │
│  │                                                                     │  │
│  │  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐              │  │
│  │  │   页面层     │  │   组件层     │  │   服务层     │              │  │
│  │  │  (Pages)    │  │ (Components) │  │ (Services)   │              │  │
│  │  └──────────────┘  └──────────────┘  └──────────────┘              │  │
│  │                                                                     │  │
│  │  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐              │  │
│  │  │   状态管理   │  │   样式系统   │  │   工具库     │              │  │
│  │  │ (Zustand)   │  │ (Tailwind)  │  │ (Utils)     │              │  │
│  │  └──────────────┘  └──────────────┘  └──────────────┘              │  │
│  └─────────────────────────────────────────────────────────────────────┘  │
│                                                                             │
├─────────────────────────────────────────────────────────────────────────────┤
│                            UI设计系统                                       │
│                                                                             │
│  🎨 配色方案：蓝色主调 (#3b82f6) + 绿/黄/红辅助色                           │
│  📐 圆角系统：rounded-lg (8px) → rounded-xl (12px) → rounded-2xl (16px)    │
│  🌑 阴影系统：shadow-sm → shadow-md → shadow-lg → shadow-2xl                │
│  🔤 字体系统：Inter + JetBrains Mono                                        │
│  📊 图表库：Recharts + Chart.js                                            │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
                                  │
                                  ▼
┌─────────────────────────────────────────────────────────────────────────────┐
│                          API通信层                                          │
│                                                                             │
│  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐                      │
│  │   Axios     │  │ React Query  │  │   WebSocket  │                      │
│  │ (HTTP客户端)  │  │   (缓存)     │  │  (实时通信)   │                      │
│  └──────────────┘  └──────────────┘  └──────────────┘                      │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
                                  │
                                  ▼
┌─────────────────────────────────────────────────────────────────────────────┐
│                           FastAPI后端服务                                   │
│                                                                             │
│  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐                      │
│  │   认证授权   │  │   业务逻辑   │  │   数据访问   │                      │
│  │   (JWT)      │  │ (Payroll)   │  │  (SQLModel)  │                      │
│  └──────────────┘  └──────────────┘  └──────────────┘                      │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

## 页面结构与导航

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                          顶部导航栏 (64px)                                  │
│  [Logo] PayrollMaster    [通知] [用户] [设置] [退出]                        │
├──────────┬──────────────────────────────────────────────────────────────────┤
│          │                                                                   │
│          │                                                                   │
│   侧边栏   │                     主内容区域                                    │
│  (260px) │                                                                   │
│          │                                                                   │
│  📊 仪表板 │                                                                   │
│  👥 员工  │                                                                   │
│  💰 薪资  │                                                                   │
│  📈 报表  │                                                                   │
│  ⚙️ 设置  │                                                                   │
│  📋 日志  │                                                                   │
│          │                                                                   │
│          │                                                                   │
└──────────┴──────────────────────────────────────────────────────────────────┘
```

## 核心页面设计

### 1. 仪表板页面 (Dashboard)

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                              欢迎回来，张三！                                │
├──────────────┬──────────────┬──────────────────────────────────────────────┤
│              │              │                                              │
│  ┌─────────┐ │  ┌─────────┐ │  ┌────────────────────────────────────────┐  │
│  │总员工数  │ │  │本月核算 │ │  │            薪资趋势图表                │  │
│  │  1,256  │ │  │¥458,200 │ │  │         📈 Line Chart                 │  │
│  │  ↗️ +5% │ │  │  ↗️ +8% │ │  └────────────────────────────────────────┘  │
│  └─────────┘ │  └─────────┘ │                                              │
│              │              │  ┌────────────────────────────────────────┐  │
│  ┌─────────┐ │  ┌─────────┐ │  │            最新计算记录                │  │
│  │待审核   │ │  │在线用户 │ │  │                                     │  │
│  │   23    │ │  │   45    │ │  │ • 张三 - 2025-12-09                 │  │
│  └─────────┘ │  └─────────┘ │  │ • 李四 - 2025-12-09                 │  │
│              │              │  │ • 王五 - 2025-12-08                 │  │
│              │              │  └────────────────────────────────────────┘  │
└──────────────┴──────────────┴──────────────────────────────────────────────┘
```

### 2. 员工列表页面

```
┌─────────────────────────────────────────────────────────────────────────────┐
│  员工管理                                    [+ 新增员工] [📤 导入Excel]   │
├──────────┬──────────────────────────────────────────────────────────────────┤
│  筛选面板  │                                                                   │
│          │  ┌────────────────────────────────────────────────────────────┐  │
│  □ 部门  │  │ 🔍 搜索员工姓名或工号...                           [搜索]   │  │
│    ▼ 技术│  └────────────────────────────────────────────────────────────┘  │
│          │                                                                   │
│  □ 状态  │  ┌────────────────────────────────────────────────────────────┐  │
│    ▼ 全部│  │  工号   │  姓名  │  部门  │  职位      │  基本薪资  │ 操作 │  │
│          │  ├────────────────────────────────────────────────────────────┤  │
│  □ 职级  │  │ EMP001 │  张三  │ 技术部 │ 高级工程师 │  ¥15,000 │ 查看 │  │
│    ▼ 全部│  │ EMP002 │  李四  │ 市场部 │  市场专员  │  ¥12,000 │ 查看 │  │
│          │  │ EMP003 │  王五  │ 财务部 │   会计师   │  ¥10,000 │ 查看 │  │
│  [重置]  │  └────────────────────────────────────────────────────────────┘  │
│          │                                                                   │
│          │                          第 1 页，共 10 页                       │
└──────────┴──────────────────────────────────────────────────────────────────┘
```

### 3. 薪资计算页面

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                              薪资计算配置                                   │
│                                                                             │
│  ┌──────────┐ ┌──────────┐ ┌──────────┐ ┌──────────┐ ┌──────────────────┐  │
│  │计算日期  │ │ 部门     │ │ 规则选择 │ │ 预览模式 │ │   🚀 开始计算    │  │
│  │2025-12  │ │ 技术部   │ │ 全部√    │ │ ☐ 启用   │ │                  │  │
│  └──────────┘ └──────────┘ └──────────┘ └──────────┘ └──────────────────┘  │
│                                                                             │
├──────────┬──────────────────────────────────────────────────────────────────┤
│          │                                                                   │
│   侧边栏  │  ┌────────────────────────────────────────────────────────────┐  │
│          │  │                  计算进度                                    │  │
│          │  │                                                             │  │
│          │  │  ████████████████░░░░░░░  75% (15/20)                      │  │
│          │  │                                                             │  │
│          │  │  正在处理：张三 (高级工程师)                                │  │
│          │  │                                                             │  │
│          │  └────────────────────────────────────────────────────────────┘  │
│          │                                                                   │
│          │  ┌────────────────────────────────────────────────────────────┐  │
│          │  │                    实时日志                                  │  │
│          │  │                                                             │  │
│          │  │  ✓ 张三 - 计算完成                                          │  │
│          │  │  ✓ 李四 - 计算完成                                          │  │
│          │  │  ✓ 王五 - 计算完成                                          │  │
│          │  │  ⏳ 赵六 - 处理中...                                        │  │
│          │  └────────────────────────────────────────────────────────────┘  │
└──────────┴──────────────────────────────────────────────────────────────────┘
```

### 4. 薪资报表页面

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                              报表中心                                       │
│                                                                             │
│  ┌──────────┐ ┌──────────┐ ┌──────────┐ ┌──────────┐ ┌──────────────────┐  │
│  │报表类型  │ │ 时间范围 │ │ 部门     │ │ 格式     │ │   📊 生成报表    │  │
│  │薪资汇总  │ │2025-12  │ │ 全部     │ │ Excel    │ │                  │  │
│  └──────────┘ └──────────┘ └──────────┘ └──────────┘ └──────────────────┘  │
│                                                                             │
├──────────┬──────────────────────────────────────────────────────────────────┤
│          │                                                                   │
│   侧边栏  │  ┌────────────────────────────────────────────────────────────┐  │
│          │  │                    部门薪资分布                              │  │
│          │  │                  📊 Pie Chart                               │  │
│          │  │                                                             │  │
│          │  │        技术部   ████████ 35%                                │  │
│          │  │        市场部   ██████ 25%                                  │  │
│          │  │        财务部   ████ 20%                                    │  │
│          │  │        人事部   ██ 12%                                     │  │
│          │  │        其他     ██ 8%                                      │  │
│          │  └────────────────────────────────────────────────────────────┘  │
│          │                                                                   │
│          │  ┌────────────────────────────────────────────────────────────┐  │
│          │  │                  薪资明细表                                  │  │
│          │  │  姓名   │  部门  │  基本薪资 │  实发薪资  │  状态         │  │
│          │  ├────────────────────────────────────────────────────────────┤  │
│          │  │  张三   │ 技术部 │ ¥15,000  │ ¥13,500   │ ✓ 已确认      │  │
│          │  │  李四   │ 市场部 │ ¥12,000  │ ¥10,800   │ ✓ 已确认      │  │
│          │  └────────────────────────────────────────────────────────────┘  │
└──────────┴──────────────────────────────────────────────────────────────────┘
```

## 组件层级架构

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                            应用根组件 (Root)                                │
│                                │                                           │
│                    ┌───────────┴───────────┐                               │
│                    │                       │                               │
│              ┌─────▼─────┐         ┌──────▼──────┐                        │
│              │ 布局组件   │         │ 错误边界     │                        │
│              │ Layout    │         │ Error       │                        │
│              └───────────┘         └─────────────┘                        │
│                    │                       │                               │
│          ┌─────────┴─────────┐             │                               │
│          │                   │             │                               │
│    ┌─────▼─────┐     ┌──────▼──────┐      │                               │
│    │ 侧边栏     │     │ 顶部导航栏   │      │                               │
│    │ Sidebar   │     │ Header      │      │                               │
│    └───────────┘     └─────────────┘      │                               │
│          │                   │             │                               │
│          └───────────────────┼─────────────┘                               │
│                              │                                             │
│                    ┌─────────▼─────────┐                                   │
│                    │   主内容区域       │                                   │
│                    │   Main Content    │                                   │
│                    └─────────┬─────────┘                                   │
│                              │                                             │
│                    ┌─────────┴─────────┐                                   │
│                    │                   │                                   │
│            ┌───────▼──────┐   ┌───────▼───────┐                           │
│            │   页面组件    │   │   通用组件     │                           │
│            │   Pages      │   │ Components    │                           │
│            └──────────────┘   └───────┬───────┘                           │
│                                          │                                 │
│                              ┌───────────┴───────────┐                     │
│                              │                       │                     │
│                      ┌───────▼──────┐     ┌────────▼──────┐              │
│                      │   基础组件    │     │   业务组件     │              │
│                      │  (Buttons,   │     │ (StatCard,    │              │
│                      │   Inputs,    │     │ DataTable,    │              │
│                      │   Modals)    │     │ Charts)       │              │
│                      └──────────────┘     └───────────────┘              │
└─────────────────────────────────────────────────────────────────────────────┘
```

## 技术栈分层图

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                            Next.js 框架层                                   │
│                                                                             │
│  App Router  │  Server Components  │  Client Components  │  API Routes     │
│  ────────    │  ────────────────   │  ────────────────   │  ──────────     │
│  文件即路由   │  服务器端渲染        │  客户端交互         │  内置API         │
│  布局嵌套     │  自动代码分割        │  状态管理           │  前后端协同       │
└─────────────────────────────────────────────────────────────────────────────┘
                                      │
                                      ▼
┌─────────────────────────────────────────────────────────────────────────────┐
│                            React 核心层                                     │
│                                                                             │
│  Hooks     │  Context API     │  Suspense    │  Error Boundaries            │
│  ─────     │  ───────────     │  ─────────   │  ──────────────             │
│  状态逻辑   │  全局状态         │  异步加载     │  错误处理                   │
└─────────────────────────────────────────────────────────────────────────────┘
                                      │
                                      ▼
┌─────────────────────────────────────────────────────────────────────────────┐
│                            UI设计系统                                       │
│                                                                             │
│  Tailwind CSS  │  Headless UI  │  React Icons  │  Framer Motion             │
│  ───────────   │  ──────────   │  ──────────   │  ─────────────            │
│  原子化CSS     │  无样式组件     │  图标库       │  动画库                   │
│  响应式设计    │  可访问性       │  SVG图标      │  页面转场                  │
└─────────────────────────────────────────────────────────────────────────────┘
                                      │
                                      ▼
┌─────────────────────────────────────────────────────────────────────────────┐
│                            数据层                                           │
│                                                                             │
│  React Query  │  Zustand      │  Axios        │  WebSocket                 │
│  ──────────   │  ───────      │  ─────        │  ──────────                │
│  数据缓存      │  轻量状态管理   │  HTTP客户端     │  实时通信                  │
│  请求优化      │  TypeScript    │  请求拦截      │  推送通知                  │
└─────────────────────────────────────────────────────────────────────────────┘
                                      │
                                      ▼
┌─────────────────────────────────────────────────────────────────────────────┐
│                            工具层                                           │
│                                                                             │
│  TypeScript  │  ESLint      │  Prettier    │  Jest/Playwright            │
│  ─────────   │  ───────     │  ────────    │  ──────────────────         │
│  类型安全     │  代码检查      │  代码格式化    │  单元/集成测试              │
│  智能提示     │  质量保证      │  统一风格      │  E2E测试                   │
└─────────────────────────────────────────────────────────────────────────────┘
```

## 响应式布局适配

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                            桌面端 (≥1024px)                                │
│                                                                             │
│  [侧边栏: 260px]    [主内容区: 自适应宽度]                                   │
│                                                                             │
│  • 侧边栏固定展开                                                                │
│  • 多列布局 (3-4列)                                                               │
│  • 完整功能展示                                                                  │
│                                                                             │
├─────────────────────────────────────────────────────────────────────────────┤
│                            平板端 (768px - 1024px)                         │
│                                                                             │
│  [侧边栏: 260px]    [主内容区: 较窄]                                         │
│                                                                             │
│  • 侧边栏可折叠                                                                   │
│  • 2-3列布局                                                                     │
│  • 紧凑间距                                                                      │
│                                                                             │
├─────────────────────────────────────────────────────────────────────────────┤
│                            移动端 (<768px)                                  │
│                                                                             │
│  [☰] [主内容区: 全宽]                                                          │
│                                                                             │
│  • 侧边栏抽屉式 (汉堡菜单)                                                       │
│  • 单列布局                                                                      │
│  • 触摸优化                                                                      │
│  • 卡片式设计                                                                    │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

## 开发流程与规范

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                            开发规范                                         │
│                                                                             │
│  📁 文件命名                                                                   │
│     • 组件: PascalCase (PayrollCard.tsx)                                      │
│     • 页面: kebab-case (payroll-results.tsx)                                  │
│     • 钩子: camelCase (usePayrollData.ts)                                     │
│                                                                             │
│  🎨 样式规范                                                                   │
│     • 使用Tailwind原子类                                                        │
│     • 自定义组件样式使用CSS Modules                                             │
│     • 遵循设计系统规范                                                          │
│                                                                             │
│  🔧 代码组织                                                                   │
│     • 按功能模块划分文件夹                                                      │
│     • 组件、页面、服务分层                                                        │
│     • 复用逻辑提取到自定义Hook                                                  │
│                                                                             │
│  ✅ 质量保证                                                                   │
│     • TypeScript严格模式                                                        │
│     • ESLint + Prettier代码检查                                                 │
│     • Jest单元测试 + Playwright E2E测试                                         │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

## 性能优化策略

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                            性能优化                                         │
│                                                                             │
│  🚀 加载优化                                                                   │
│     • 代码分割 (Code Splitting)                                                │
│     • 动态导入 (Dynamic Import)                                                │
│     • 图片优化 (Next/Image)                                                    │
│     • 字体优化 (next/font)                                                     │
│                                                                             │
│  💾 缓存策略                                                                   │
│     • React Query数据缓存                                                       │
│     • 服务端渲染缓存 (ISR)                                                      │
│     • 浏览器缓存 (Cache-Control)                                                │
│                                                                             │
│  📊 渲染优化                                                                   │
│     • 服务端渲染 (SSR)                                                          │
│     • 静态生成 (SSG)                                                            │
│     • 增量静态再生 (ISR)                                                        │
│     • 虚拟滚动 (大数据列表)                                                     │
│                                                                             │
│  🔄 实时更新                                                                   │
│     • React Query轮询                                                           │
│     • WebSocket实时推送                                                         │
│     • Optimistic Updates                                                        │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

## 总结

PayrollMaster前端架构采用**Next.js 14 + App Router**技术栈，实现：

✅ **现代化架构**：文件即路由、服务器组件、客户端组件分离
✅ **优雅设计**：金融仪表板美学、圆角阴影、蓝色主调
✅ **响应式布局**：桌面/平板/移动端自适应
✅ **高性能**：SSR/SSG/ISR多种渲染模式
✅ **开发效率**：TypeScript + Tailwind + 组件化开发
✅ **企业级**：完整的状态管理、错误处理、测试覆盖

通过清晰的架构分层和模块化设计，确保系统的可维护性、可扩展性和优秀的用户体验。
