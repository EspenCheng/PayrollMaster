# Web数据展示表格结构说明

## 概述

本文档详细说明PayrollMaster薪资自动核算系统Web界面中的数据展示结构，包括数据表格的字段定义、展示方式、交互功能等。

## 主要页面结构

### 1. 数据导入页面 (Data Import Page)
**用途**: 展示Excel数据导入功能和数据预览

#### 导入文件上传区域
- **文件选择器**: 支持拖拽上传或点击选择
- **文件格式提示**: 显示支持的文件格式 (.xlsx, .xls)
- **文件大小提示**: 最大50MB
- **上传进度条**: 显示文件上传进度

#### 数据预览表格
- **表格标题**: "导入数据预览"
- **分页显示**: 每页显示50条记录
- **字段列**: 根据Excel列标题动态生成
- **数据类型标识**: 不同类型字段使用不同颜色标识
- **必填项标识**: 必填字段标红色星号 (*)

#### 验证结果展示
- **成功记录数**: 显示成功导入的记录数量
- **错误记录数**: 显示有错误的记录数量
- **错误详情列表**: 点击查看具体错误信息

### 2. 薪资计算配置页面 (Calculation Configuration Page)
**用途**: 展示和管理薪资计算规则配置

#### 配置表单区域
- **基本信息配置**
  - 基础制度日工数 (BASEWORKDAYS): 默认21.75
  - 前夜班津贴标准 (EARLYNIGHTSUBSIDY): 默认18
  - 后夜班津贴标准 (LATENIGHTSUBSIDY): 默认20

- **计算规则配置**
  - 奖金计算规则: 百分比或固定金额
  - 扣款项目配置: 迟到扣款、病假扣款等
  - 加班费计算方式: 倍数设置（1.5倍、2倍、3倍等）

#### 配置预览区域
- **实时预览**: 修改配置后实时显示计算结果预览
- **对比显示**: 新旧配置的计算结果对比
- **影响分析**: 显示配置变更对现有数据的影响

### 3. 薪资计算结果页面 (Calculation Results Page)
**用途**: 展示薪资计算结果和详细明细

#### 结果概览区域
- **统计卡片**
  - 员工总数: 显示参与计算的员工数量
  - 应发工资总额: 显示所有员工应发工资总和
  - 实发工资总额: 显示所有员工实发工资总和
  - 平均工资: 显示平均工资水平

- **部门汇总表**
  - 部门名称
  - 员工数量
  - 应发工资总额
  - 实发工资总额

#### 员工明细表格
**表格结构 (分页显示，每页50条)**

| 列名 | 显示名称 | 数据类型 | 可排序 | 可筛选 | 宽度 | 对齐方式 |
|------|----------|----------|--------|--------|------|----------|
| employeeCode | 员工编码 | 字符串 | ✅ | ✅ | 100px | 左对齐 |
| employeeName | 员工姓名 | 字符串 | ✅ | ✅ | 120px | 左对齐 |
| departmentName | 部门 | 字符串 | ✅ | ✅ | 150px | 左对齐 |
| salarySystem | 工资薪制 | 字符串 | ✅ | ✅ | 100px | 左对齐 |
| positionSalary | 岗位工资 | 数值 | ✅ | ✅ | 120px | 右对齐 |
| undergroundHealthSalary | 井下岗位工资 | 数值 | ✅ | ✅ | 120px | 右对齐 |
| senioritySalary | 年功工资 | 数值 | ✅ | ✅ | 100px | 右对齐 |
| overtimeSalaryTotal | 加班工资 | 数值 | ✅ | ✅ | 120px | 右对齐 |
| paidLeaveSalaryTotal | 带薪假工资 | 数值 | ✅ | ✅ | 120px | 右对齐 |
| auxiliarySalaryTotal | 辅助工资 | 数值 | ✅ | ✅ | 120px | 右对齐 |
| performanceSalaryTotal | 绩效工资 | 数值 | ✅ | ✅ | 120px | 右对齐 |
| striverSpecialIncentive | 专项激励 | 数值 | ✅ | ✅ | 120px | 右对齐 |
| contributionIncome | 贡献收入 | 数值 | ✅ | ✅ | 120px | 右对齐 |
| penaltyDeduction | 扣罚工资 | 数值 | ✅ | ✅ | 120px | 右对齐 |
| grossSalary | 应发工资 | 数值 | ✅ | ✅ | 120px | 右对齐 |
| personalDeductionTotal | 个人扣款 | 数值 | ✅ | ✅ | 120px | 右对齐 |
| netSalary | 实发工资 | 数值 | ✅ | ✅ | 120px | 右对齐 |
| actions | 操作 | 操作按钮 | ❌ | ❌ | 150px | 居中 |

#### 明细查看弹窗
**触发方式**: 点击员工行的"查看明细"按钮

**弹窗内容结构**

1. **员工基本信息**
   - 员工编码、姓名、部门、职务等
   - 集团工龄、入井年限等

2. **考勤明细表格**

| 考勤项目 | 天数/小时 | 金额 |
|----------|----------|------|
| 制度工日工数 | 21 | - |
| 加班工数 | 3 | 600.00 |
| 带薪年休假 | 5 | 800.00 |
| 病假 | 2 | 160.00 |
| 下井工数 | 20 | 900.00 |
| 夜班工数 | 10 | 190.00 |

3. **薪资构成明细**

| 薪资项目 | 计算公式 | 金额 |
|----------|----------|------|
| 岗位工资 | 日资×21.75 | 3500.00 |
| 井下岗位工资 | 岗位工资×0.2 | 700.00 |
| 年功工资 | 5年×80 | 400.00 |
| 加班工资 | 日资×3×2 | 600.00 |
| 带薪假工资 | 日资×5 | 800.00 |
| 下井津贴 | 20×45 | 900.00 |
| 夜班津贴 | 5×18+5×20 | 190.00 |

4. **扣款明细**

| 扣款项目 | 金额 |
|----------|------|
| 养老保险(个人) | 500.00 |
| 医疗保险(个人) | 200.00 |
| 失业保险(个人) | 50.00 |
| 住房公积金(个人) | 300.00 |
| 个人扣款合计 | 1050.00 |

5. **最终汇总**
   - 应发工资: 8090.00
   - 个人扣款: 1050.00
   - 实发工资: 7040.00

### 4. 报表导出页面 (Report Export Page)
**用途**: 展示报表导出功能和导出历史

#### 导出选项配置
- **报表类型选择**
  - 薪资汇总表
  - 薪资明细表
  - 自定义报表

- **筛选条件设置**
  - 部门选择 (多选)
  - 工资范围设置
  - 工龄范围设置
  - 日期范围设置

- **导出格式选项**
  - 文件格式 (.xlsx)
  - 是否包含明细
  - 是否包含图表

#### 导出历史列表
**表格结构**

| 列名 | 显示名称 | 数据类型 | 说明 |
|------|----------|----------|------|
| exportId | 导出编号 | 字符串 | 唯一标识 |
| exportType | 导出类型 | 字符串 | 汇总表/明细表 |
| exportTime | 导出时间 | 日期时间 | 导出操作时间 |
| recordCount | 记录数 | 数值 | 导出的记录数量 |
| fileName | 文件名 | 字符串 | 导出的文件名 |
| downloadUrl | 下载链接 | 操作 | 下载按钮 |
| status | 状态 | 字符串 | 成功/失败/处理中 |

### 5. 用户管理页面 (User Management Page)
**用途**: 管理用户账号和权限

#### 用户列表表格
**表格结构**

| 列名 | 显示名称 | 数据类型 | 说明 |
|------|----------|----------|------|
| userId | 用户ID | 字符串 | 唯一标识 |
| userName | 用户名 | 字符串 | 登录用户名 |
| fullName | 姓名 | 字符串 | 用户真实姓名 |
| role | 角色 | 字符串 | 管理员/薪资核算员/普通用户 |
| department | 部门 | 字符串 | 所属部门 |
| status | 状态 | 字符串 | 启用/禁用 |
| lastLogin | 最后登录 | 日期时间 | 最后登录时间 |
| actions | 操作 | 操作按钮 | 编辑/删除/重置密码 |

## 通用功能

### 表格操作功能
1. **排序功能**
   - 单列排序: 点击列标题进行升序/降序排序
   - 多列排序: 按住Ctrl键点击多个列标题
   - 排序指示器: 显示排序方向箭头图标

2. **筛选功能**
   - 列筛选: 每列提供筛选下拉框
   - 全局搜索: 提供全局搜索框，支持模糊匹配
   - 高级筛选: 支持多条件组合筛选

3. **分页功能**
   - 页码显示: 当前页/总页数
   - 每页条数: 可选择 20/50/100/200 条
   - 页码跳转: 输入页码直接跳转
   - 上一页/下一页: 快速翻页按钮

4. **列操作**
   - 列显示/隐藏: 右键列标题显示/隐藏列
   - 列顺序调整: 拖拽列标题调整列顺序
   - 列宽调整: 拖拽列边框调整列宽
   - 列固定: 双击列边框自动适应内容

### 数据展示特性
1. **数据类型标识**
   - 数值: 右对齐，使用千分位分隔符
   - 字符串: 左对齐
   - 日期: 使用 YYYY-MM-DD 格式
   - 百分比: 显示%符号，保留1位小数

2. **空值处理**
   - 空值显示: "-"
   - 零值显示: "0.00" 或 "0"
   - 未计算显示: "—"

3. **颜色标识**
   - 正数: 黑色
   - 负数: 红色 (#DC3545)
   - 零值: 灰色 (#6C757D)
   - 必填项: 红色星号 (*)

### 响应式设计
1. **桌面端 (≥1200px)**
   - 显示所有列
   - 完整功能面板
   - 多列布局

2. **平板端 (768px-1199px)**
   - 隐藏部分次要列
   - 合并部分列
   - 简化功能面板

3. **移动端 (<768px)**
   - 只显示关键列（员工编码、姓名、部门、实发工资）
   - 卡片式布局
   - 滑动查看更多列

### 性能优化
1. **虚拟滚动**: 大量数据时启用虚拟滚动
2. **懒加载**: 分页数据懒加载
3. **缓存机制**: 表格配置和筛选条件缓存
4. **防抖搜索**: 搜索输入防抖处理（300ms）

### 可访问性
1. **键盘导航**: 支持Tab键和方向键导航
2. **屏幕阅读器**: 提供语义化标签和ARIA属性
3. **高对比度**: 支持高对比度模式
4. **字体缩放**: 支持150%-200%字体缩放

## 技术实现要求

### 前端框架
- 使用现代前端框架 (React/Vue/Angular)
- 表格组件使用成熟的开源库 (如Ant Design Table)

### 数据格式
- 所有数据使用JSON格式
- 金额使用分为单位，前端转换为元显示
- 日期使用ISO 8601格式 (YYYY-MM-DDTHH:mm:ss.sssZ)

### API接口
- 分页接口: GET /api/payroll/employees?page=1&size=50&sort=netSalary,desc
- 筛选接口: GET /api/payroll/employees/filter
- 导出接口: POST /api/payroll/export
- 下载接口: GET /api/payroll/export/{exportId}/download

### 错误处理
- 网络错误: 显示"网络连接失败，请检查网络后重试"
- 服务端错误: 显示"服务暂不可用，请稍后重试"
- 数据验证错误: 在表格中标记错误行并提供错误提示
- 权限错误: 显示"您没有权限访问此功能"

## 注意事项

1. **数据一致性**: Web界面显示的数据必须与Excel导入导出数据保持一致
2. **计算精度**: 所有计算结果保留2位小数
3. **实时更新**: 数据修改后需要实时更新相关统计数据
4. **用户体验**: 操作响应时间不超过500ms
5. **浏览器兼容**: 支持Chrome、Firefox、Safari、Edge四大主流浏览器
