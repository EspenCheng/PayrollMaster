# PayrollMasteræŠ€æœ¯æ ˆæ›´æ–°æ€»ç»“æŠ¥å‘Š

## ğŸ“‹ æ›´æ–°æ¦‚è§ˆ

**æ›´æ–°æ—¥æœŸ**: 2025-12-09  
**åŠŸèƒ½åˆ†æ”¯**: `001-payroll-calculation-system`  
**æ›´æ–°ç±»å‹**: æŠ€æœ¯æ ˆè°ƒæ•´ + å‰ç«¯è®¾è®¡è§„èŒƒ

---

## ğŸ”„ å˜æ›´å†…å®¹

### 1. å‰ç«¯æ¡†æ¶å˜æ›´

**å˜æ›´å‰**:
- React 18 + Vite
- å®¢æˆ·ç«¯æ¸²æŸ“ (CSR)

**å˜æ›´å**:
- **Next.js 14 (App Router)**
- æœåŠ¡ç«¯æ¸²æŸ“ (SSR) + é™æ€ç”Ÿæˆ (SSG) + å¢é‡é™æ€å†ç”Ÿ (ISR)

### 2. è®¾è®¡é£æ ¼å‡çº§

**æ–°å¢**:
- ç°ä»£é‡‘èä»ªè¡¨æ¿ç¾å­¦è®¾è®¡è§„èŒƒ
- å¤§é‡ä½¿ç”¨åœ†è§’ã€æŸ”å’Œæ¼«å°„é˜´å½±
- è“è‰²ä¸»è°ƒé…è‰²æ–¹æ¡ˆ
- ä¾§è¾¹æ å¯¼èˆªå¸ƒå±€

---

## âœ… å·²å®Œæˆå·¥ä½œ

### æ–‡æ¡£æ›´æ–°

1. **plan.md** - æ›´æ–°æŠ€æœ¯æ ˆä¿¡æ¯
   - âœ… åç«¯ï¼šPython 3.11 + FastAPI + SQLModel + PostgreSQL
   - âœ… å‰ç«¯ï¼šNext.js 14 (App Router) + Tailwind CSS
   - âœ… é¡¹ç›®ç±»å‹ï¼šWebåº”ç”¨ (å‰åç«¯åˆ†ç¦»æ¶æ„)

2. **Agent Contextæ›´æ–°**
   - âœ… æ›´æ–° `.claude/CLAUDE.md`
   - âœ… æ·»åŠ Next.jsæ¡†æ¶ä¿¡æ¯
   - âœ… ä¿æŒå…¶ä»–æŠ€æœ¯æ ˆä¸å˜

### æ–°å¢è®¾è®¡æ–‡æ¡£

3. **frontend-design-spec.md** (10000+ å­—)
   - âœ… å®Œæ•´çš„è®¾è®¡ç³»ç»Ÿï¼ˆé…è‰²ã€å­—ä½“ã€åœ†è§’ã€é˜´å½±ï¼‰
   - âœ… 8ä¸ªæ ¸å¿ƒé¡µé¢è¯¦ç»†è®¾è®¡è§„èŒƒ
   - âœ… ç»„ä»¶è®¾è®¡è§„èŒƒï¼ˆæŒ‰é’®ã€è¾“å…¥æ¡†ã€å¡ç‰‡ã€è¡¨æ ¼ã€æ¨¡æ€æ¡†ï¼‰
   - âœ… äº¤äº’è®¾è®¡ï¼ˆåŠ¨ç”»ã€çŠ¶æ€åé¦ˆï¼‰
   - âœ… æ•°æ®å¯è§†åŒ–è§„èŒƒ
   - âœ… å“åº”å¼è®¾è®¡ç­–ç•¥
   - âœ… æ— éšœç¢æ€§è®¾è®¡
   - âœ… Next.jsç‰¹æ€§åº”ç”¨

4. **32-æŠ€æœ¯æ ˆåˆ†æ.md** (5000+ å­—)
   - âœ… Next.js vs Reactå¯¹æ¯”åˆ†æ
   - âœ… é€‰æ‹©Next.jsçš„6å¤§æ ¸å¿ƒåŸå› 
   - âœ… æ¶æ„å¯¹æ¯”å›¾
   - âœ… å‰ç«¯é¡µé¢è®¾è®¡éœ€æ±‚è¯¦è¿°
   - âœ… ç°ä»£é‡‘èä»ªè¡¨æ¿ç¾å­¦ç‰¹å¾
   - âœ… æ ¸å¿ƒç»„ä»¶åº“å®ç°

5. **21-å‰ç«¯æ¶æ„è®¾è®¡.md** (3000+ å­—)
   - âœ… ç³»ç»Ÿæ•´ä½“æ¶æ„å›¾
   - âœ… é¡µé¢ç»“æ„ä¸å¯¼èˆª
   - âœ… æ ¸å¿ƒé¡µé¢è®¾è®¡å±•ç¤º
   - âœ… ç»„ä»¶å±‚çº§æ¶æ„
   - âœ… æŠ€æœ¯æ ˆåˆ†å±‚å›¾
   - âœ… å“åº”å¼å¸ƒå±€é€‚é…
   - âœ… å¼€å‘æµç¨‹ä¸è§„èŒƒ
   - âœ… æ€§èƒ½ä¼˜åŒ–ç­–ç•¥

---

## ğŸ¨ è®¾è®¡ç³»ç»Ÿäº®ç‚¹

### è§†è§‰è®¾è®¡

```css
é…è‰²æ–¹æ¡ˆ:
- ä¸»è‰²: #3b82f6 (è“è‰²-ä¿¡ä»»ã€ä¸“ä¸š)
- è¾…åŠ©è‰²: #10b981 (ç»¿è‰²-æˆåŠŸ) / #f59e0b (é»„è‰²-è­¦å‘Š) / #ef4444 (çº¢è‰²-é”™è¯¯)
- èƒŒæ™¯: æ¸å˜ #667eea â†’ #764ba2
- å¡ç‰‡: ç™½è‰² + shadow-2xl

åœ†è§’ç³»ç»Ÿ:
- å°å…ƒç´ : rounded-lg (8px)
- ä¸­ç­‰å…ƒç´ : rounded-xl (12px)
- å¤§å‹å®¹å™¨: rounded-2xl (16px)

é˜´å½±ç³»ç»Ÿ:
- å¾®å¦™: shadow-sm
- æ ‡å‡†: shadow-md
- æ·±åº¦: shadow-lg
- å¼ºé˜´å½±: shadow-2xl (æ¨¡æ€æ¡†)
```

### å¸ƒå±€è®¾è®¡

```
ä¾§è¾¹æ å¯¼èˆª (260pxå®½):
ğŸ“Š ä»ªè¡¨æ¿
ğŸ‘¥ å‘˜å·¥ç®¡ç†
ğŸ’° è–ªèµ„ç®¡ç†
ğŸ“ˆ æŠ¥è¡¨ä¸­å¿ƒ
âš™ï¸ ç³»ç»Ÿè®¾ç½®
ğŸ“‹ æ“ä½œæ—¥å¿—
```

### é¡µé¢è®¾è®¡

1. **ä»ªè¡¨æ¿**: ç»Ÿè®¡å¡ç‰‡ + è¶‹åŠ¿å›¾è¡¨ + æœ€æ–°è®°å½•
2. **å‘˜å·¥åˆ—è¡¨**: ç­›é€‰é¢æ¿ + æ•°æ®è¡¨æ ¼ + åˆ†é¡µ
3. **è–ªèµ„è®¡ç®—**: é…ç½®é¢æ¿ + è¿›åº¦æ˜¾ç¤º + å®æ—¶æ—¥å¿—
4. **æŠ¥è¡¨ä¸­å¿ƒ**: ç­›é€‰å™¨ + å›¾è¡¨å±•ç¤º + æ•°æ®è¡¨æ ¼
5. **ç™»å½•é¡µ**: å±…ä¸­å¡ç‰‡ + æ¸å˜èƒŒæ™¯ + å“ç‰Œæ ‡è¯†

---

## ğŸš€ Next.jsæ ¸å¿ƒä¼˜åŠ¿

### 1. æœåŠ¡ç«¯æ¸²æŸ“ (SSR)
```tsx
const PayrollResultsPage = async ({ searchParams }) => {
  // æœåŠ¡å™¨ç«¯ç›´æ¥è·å–æ•°æ®
  const results = await getPayrollResults(searchParams.date)
  
  return (
    <div className="p-8">
      <ResultsTable results={results} />
    </div>
  )
}
```

### 2. å†…ç½®API Routes
```tsx
// app/api/payroll/calculate/route.ts
export async function POST(request: NextRequest) {
  const body = await request.json()
  // ç›´æ¥è°ƒç”¨FastAPIåç«¯
  const result = await fetch(`${API_URL}/payroll/calculate`, {...})
  return NextResponse.json(await result.json())
}
```

### 3. App Router
```
app/
â”œâ”€â”€ layout.tsx
â”œâ”€â”€ page.tsx
â”œâ”€â”€ login/
â”‚   â””â”€â”€ page.tsx
â”œâ”€â”€ dashboard/
â”‚   â””â”€â”€ page.tsx
â””â”€â”€ payroll/
    â”œâ”€â”€ calculate/
    â”‚   â””â”€â”€ page.tsx
    â””â”€â”€ results/
        â””â”€â”€ page.tsx
```

### 4. æ€§èƒ½ä¼˜åŒ–
- å›¾ç‰‡ä¼˜åŒ–: `next/image`
- å­—ä½“ä¼˜åŒ–: `next/font`
- ä»£ç åˆ†å‰²: åŠ¨æ€å¯¼å…¥
- ç¼“å­˜ç­–ç•¥: React Query + ISR

---

## ğŸ“Š æ€§èƒ½æŒ‡æ ‡ç›®æ ‡

| æŒ‡æ ‡ | ç›®æ ‡å€¼ | è¯´æ˜ |
|------|--------|------|
| é¦–å±åŠ è½½æ—¶é—´ (FCP) | < 1.5s | SSRæå‡é¦–å±é€Ÿåº¦ |
| äº¤äº’å“åº”æ—¶é—´ (TTI) | < 3s | ä»£ç åˆ†å‰²å‡å°‘åŒ…å¤§å° |
| APIå“åº”æ—¶é—´ | p95 < 200ms | Next.js API Routesä¼˜åŒ– |
| ç§»åŠ¨ç«¯é€‚é… | 100% | å“åº”å¼è®¾è®¡ |
| Lighthouseåˆ†æ•° | > 90 | Next.jså†…ç½®ä¼˜åŒ– |

---

## ğŸ¯ ä¸‹ä¸€æ­¥è¡ŒåŠ¨

### Phase 2: ä»»åŠ¡ç”Ÿæˆ
ä½¿ç”¨ `/speckit.tasks` å‘½ä»¤ç”Ÿæˆå¯æ‰§è¡Œçš„ä»»åŠ¡æ¸…å•

### Phase 3: å¼€å‘å®æ–½
æ ¹æ®ä»»åŠ¡æ¸…å•è¿›è¡Œå‰åç«¯å¼€å‘

---

## ğŸ“š ç›¸å…³æ–‡æ¡£ç´¢å¼•

| æ–‡æ¡£åç§° | è·¯å¾„ | æè¿° |
|----------|------|------|
| è§„åˆ’æ–‡æ¡£ | `plan.md` | é¡¹ç›®æ•´ä½“è§„åˆ’ |
| åŠŸèƒ½è§„æ ¼ | `spec.md` | åŠŸèƒ½éœ€æ±‚è¯¦ç»†è¯´æ˜ |
| æ•°æ®æ¨¡å‹ | `data-model.md` | æ•°æ®åº“è®¾è®¡ |
| APIè§„èŒƒ | `contracts/api-endpoints.md` | REST APIæ–‡æ¡£ |
| OpenAPI | `contracts/openapi.yaml` | APIå¥‘çº¦ |
| å¿«é€Ÿå…¥é—¨ | `quickstart.md` | éƒ¨ç½²å’Œä¸Šæ‰‹æŒ‡å— |
| å‰ç«¯è®¾è®¡ | `frontend-design-spec.md` | **å®Œæ•´å‰ç«¯è®¾è®¡è§„èŒƒ** |
| æŠ€æœ¯åˆ†æ | `tech-stack-analysis.md` | **æŠ€æœ¯æ ˆå¯¹æ¯”åˆ†æ** |
| æ¶æ„è“å›¾ | `21-å‰ç«¯æ¶æ„è®¾è®¡.md` | **å‰ç«¯æ¶æ„å›¾è§£** |

---

## âœ¨ æ€»ç»“

æœ¬æ¬¡æŠ€æœ¯æ ˆæ›´æ–°æˆåŠŸå°†PayrollMasterå‰ç«¯ä»Reactå‡çº§ä¸ºNext.jsï¼Œå¹¶å»ºç«‹äº†å®Œæ•´çš„è®¾è®¡ç³»ç»Ÿã€‚æ–°æ¶æ„å…·å¤‡ï¼š

âœ… **æ›´å¼ºçš„æ€§èƒ½**: SSR/SSGæå‡ç”¨æˆ·ä½“éªŒ  
âœ… **æ›´å¥½çš„SEO**: æœåŠ¡å™¨ç«¯æ¸²æŸ“åˆ©äºæœç´¢å¼•æ“  
âœ… **æ›´æ¸…æ™°çš„æ¶æ„**: App Routeræ–‡ä»¶å³è·¯ç”±  
âœ… **æ›´ä¸“ä¸šçš„è®¾è®¡**: ç°ä»£é‡‘èä»ªè¡¨æ¿ç¾å­¦  
âœ… **æ›´é«˜çš„å¼€å‘æ•ˆç‡**: å†…ç½®API Routesç®€åŒ–éƒ¨ç½²  

**æŠ€æœ¯æ ˆç¡®è®¤**:
- åç«¯: Python 3.11 + FastAPI + SQLModel + PostgreSQL
- å‰ç«¯: **Next.js 14 (App Router)** + Tailwind CSS
- æ¶æ„: å‰åç«¯åˆ†ç¦»
- è®¾è®¡: ç°ä»£é‡‘èä»ªè¡¨æ¿ç¾å­¦

æ‰€æœ‰è®¾è®¡æ–‡æ¡£å·²å‡†å¤‡å°±ç»ªï¼Œå¯è¿›å…¥Phase 2ä»»åŠ¡ç”Ÿæˆé˜¶æ®µï¼ ğŸ‰

### Excelæ ¼å¼é‡è¦æ›´æ–°

**âš ï¸ åŒå±‚è¡¨å¤´æ ¼å¼**ï¼š
- ç¬¬1è¡Œï¼šè‹±æ–‡å­—æ®µåï¼ˆç”¨äºç³»ç»Ÿå­—æ®µæ˜ å°„ï¼‰
- ç¬¬2è¡Œï¼šä¸­æ–‡å­—æ®µåï¼ˆç”¨äºç•Œé¢æ˜¾ç¤ºï¼‰
- ç¬¬3è¡Œå¼€å§‹ï¼šå®é™…æ•°æ®

**æ›´æ–°æ–‡æ¡£**ï¼š
- âœ… `frontend-design-spec.md` - æ·»åŠ Excelæ–‡ä»¶æ ¼å¼è¯´æ˜
- âœ… `quickstart.md` - æ›´æ–°Excelå¯¼å…¥æŒ‡å—
- âœ… `data-model.md` - æ–°å¢Excelå­—æ®µæ˜ å°„ç« èŠ‚
- âœ… `contracts/api-endpoints.md` - æ›´æ–°APIæ–‡æ¡£ä¸­çš„Excelè¯´æ˜
- âœ… `excel-format-spec.md` - åˆ›å»ºä¸“é—¨çš„Excelæ ¼å¼è§„èŒƒæ–‡æ¡£ï¼ˆ15000+å­—ï¼‰

**æ–°å¢æ–‡æ¡£**ï¼š
- `excel-format-spec.md` - å®Œæ•´çš„Excelæ ¼å¼è§„èŒƒï¼ŒåŒ…å«å­—æ®µæ˜ å°„ã€éªŒè¯è§„åˆ™ã€æŠ€æœ¯å®ç°ç­‰
